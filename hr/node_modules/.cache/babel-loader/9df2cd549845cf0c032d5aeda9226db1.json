{"remainingRequest":"D:\\MyProgram\\SpringBoot+Vue\\人事管理系统\\frontEnd\\hr\\node_modules\\babel-loader\\lib\\index.js!D:\\MyProgram\\SpringBoot+Vue\\人事管理系统\\frontEnd\\hr\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\MyProgram\\SpringBoot+Vue\\人事管理系统\\frontEnd\\hr\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyProgram\\SpringBoot+Vue\\人事管理系统\\frontEnd\\hr\\src\\components\\UserInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyProgram\\SpringBoot+Vue\\人事管理系统\\frontEnd\\hr\\src\\components\\UserInfo.vue","mtime":1595002925838},{"path":"D:\\MyProgram\\SpringBoot+Vue\\人事管理系统\\frontEnd\\hr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProgram\\SpringBoot+Vue\\人事管理系统\\frontEnd\\hr\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\MyProgram\\SpringBoot+Vue\\人事管理系统\\frontEnd\\hr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProgram\\SpringBoot+Vue\\人事管理系统\\frontEnd\\hr\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyRm9ybTogewogICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICBhZGRyZXNzOiAnJywKICAgICAgICBwaG9uZTogJycsCiAgICAgICAgZW1haWw6ICcnLAogICAgICAgIHVuaXQ6ICcnLAogICAgICAgIHBvc2l0aW9uOiAnJwogICAgICB9LAogICAgICB1bml0U2VsZWN0OiBbXSwKICAgICAgcG9zdFNlbGVjdDogW10sCiAgICAgIHVzZXJGb3JtUnVsZXM6IHsKICAgICAgICBhZGRyZXNzOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5Zyw5Z2A5LiN6IO95Li656m6JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHBob25lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn55S16K+d5LiN6IO95Li656m6JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIGVtYWlsOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6YKu566x5LiN6IO95Li656m6JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRVbml0U2VsZWN0KCk7CiAgICB0aGlzLmdldFBvc3RTZWxlY3QoKTsKICAgIHRoaXMuZ2V0VXNlckluZm8oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiuv+mXruWQjuerr+aOpeWPo++8jOiOt+WPluacuuaehOS4i+aLieahhgogICAgZ2V0VW5pdFNlbGVjdDogZnVuY3Rpb24gZ2V0VW5pdFNlbGVjdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJGh0dHAuZ2V0KCcvdXNlci9nZXR1bml0YnluYW1lP25hbWU9JmN1cnJlbnRfaW5kZXg9MCZwYWdlX3NpemU9MTAwMCcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgIGlmIChyZXMuZGF0YS5zdGF0ZSA9PT0gMjAwKSB7CiAgICAgICAgICBfdGhpcy51bml0U2VsZWN0ID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluacuuaehOWksei0pScpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKF9lcnJvcikgewogICAgICAgIC8vIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bmnLrmnoTlpLHotKUnKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6K6/6Zeu5ZCO56uv77yM6I635Y+W5bKX5L2N5LiL5ouJCiAgICBnZXRQb3N0U2VsZWN0OiBmdW5jdGlvbiBnZXRQb3N0U2VsZWN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGh0dHAuZ2V0KCcvdXNlci9nZXRwb3N0P25hbWU9JmN1cnJlbnRfaW5kZXg9MCZwYWdlX3NpemU9MTAwMCcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5zdGF0ZSA9PT0gMjAwKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKQogICAgICAgICAgX3RoaXMyLnBvc3RTZWxlY3QgPSByZXMuZGF0YS5kYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluWyl+S9jeWksei0pScpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKF9lcnJvcikgewogICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcign6I635Y+W5bKX5L2N5aSx6LSlJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogICAgZ2V0VXNlckluZm86IGZ1bmN0aW9uIGdldFVzZXJJbmZvKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogICAgICB0aGlzLiRodHRwLmdldCgnL3VzZXIvZ2V0X3VzZXJpbmZvJykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwoKICAgICAgICBpZiAocmVzLmRhdGEuc3RhdGUgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMzLnVzZXJGb3JtID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChfZXJyb3IpIHsKICAgICAgICBfdGhpczMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPlueUqOaIt+S/oeaBr+Wksei0pScgKyBfZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDkv67mlLnmnKzkurrkv6Hmga8KICAgIG1vZGlmeVVzZXI6IGZ1bmN0aW9uIG1vZGlmeVVzZXIoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmcy5tb2RpZnlGb3JtUmVmLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCA9PT0gdHJ1ZSkgewogICAgICAgICAgLy8g6KGo5Y2V6aqM6K+B6YCa6L+H77yM6K6/6Zeu5ZCO56uv5o6l5Y+j77yM5L+u5pS555So5oi35L+h5oGvCiAgICAgICAgICBfdGhpczQuJGh0dHAucHV0KCcvdXNlci9tb2RpZnlfdXNlcmluZm8nLCBfdGhpczQudXNlckZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdGUgPT09IDIwMCkgewogICAgICAgICAgICAgIF90aGlzNC5nZXRVc2VySW5mbygpOwoKICAgICAgICAgICAgICBfdGhpczQuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55Liq5Lq65L+h5oGv5oiQ5YqfJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXM0LiRtZXNzYWdlLmVycm9yKCfkv67mlLnkuKrkurrkv6Hmga/lpLHotKUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKF9lcnJvcikgewogICAgICAgICAgICBfdGhpczQuJG1lc3NhZ2UuZXJyb3IoJ+S/ruaUueS4quS6uuS/oeaBr+Wksei0pScpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsvLyB0aGlzLmdldFVzZXJJbmZvKCkKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["UserInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <!-- 面包屑 -->\r\n        <el-breadcrumb separator=\"/\">\r\n            <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>设置中心</el-breadcrumb-item>\r\n            <el-breadcrumb-item>个人基本信息</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <el-row>\r\n              <el-col :span=\"10\">\r\n                <el-form ref=\"modifyFormRef\" :model=\"userForm\" label-width=\"110px\" :rules=\"userFormRules\">\r\n                    <el-form-item label=\"用户名：\">\r\n                    <el-input v-model=\"userForm.username\" width=\"100px\"  disabled></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"地址：\" prop=\"address\">\r\n                        <el-input v-model=\"userForm.address\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"电话：\" prop=\"phone\">\r\n                        <el-input v-model=\"userForm.phone\" ></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"邮箱：\" prop=\"email\">\r\n                        <el-input v-model=\"userForm.email\" ></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"所在机构：\">\r\n                        <el-select v-model=\"userForm.unit\" placeholder=\"请选择\" disabled>\r\n                            <el-option\r\n                            v-for=\"item in unitSelect\"\r\n                            :key=\"item.id\"\r\n                            :label=\"item.name\"\r\n                            :value=\"item.id\">\r\n                            </el-option>\r\n                        </el-select>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"岗位：\">\r\n                        <el-select v-model=\"userForm.position\" placeholder=\"请选择\" disabled>\r\n                            <el-option\r\n                            v-for=\"item in postSelect\"\r\n                            :key=\"item.id\"\r\n                            :label=\"item.name\"\r\n                            :value=\"item.id\">\r\n                            </el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item >\r\n                    <span class=\"button_span\">\r\n                        <el-button type=\"primary\" @click=\"modifyUser()\" size=\"small\">提交</el-button>\r\n                    </span>\r\n                    </el-form-item>\r\n                </el-form>\r\n              </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      userForm: {\r\n        username: '',\r\n        address: '',\r\n        phone: '',\r\n        email: '',\r\n        unit: '',\r\n        position: ''\r\n      },\r\n      unitSelect: [],\r\n      postSelect: [],\r\n      userFormRules: {\r\n        address: [{ required: true, message: '地址不能为空', trigger: 'blur' }],\r\n        phone: [{ required: true, message: '电话不能为空', trigger: 'blur' }],\r\n        email: [{ required: true, message: '邮箱不能为空', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getUnitSelect()\r\n    this.getPostSelect()\r\n    this.getUserInfo()\r\n  },\r\n  methods: {\r\n    // 访问后端接口，获取机构下拉框\r\n    getUnitSelect () {\r\n      this.$http.get('/user/getunitbyname?name=&current_index=0&page_size=1000')\r\n        .then(res => {\r\n          // console.log(res.data)\r\n          if (res.data.state === 200) {\r\n            this.unitSelect = res.data.data\r\n          } else {\r\n            this.$message.error('获取机构失败')\r\n          }\r\n        })\r\n        .catch(_error => {\r\n          // console.log(error)\r\n          this.$message.error('获取机构失败')\r\n        })\r\n    },\r\n    // 访问后端，获取岗位下拉\r\n    getPostSelect () {\r\n      this.$http.get('/user/getpost?name=&current_index=0&page_size=1000')\r\n        .then(res => {\r\n          if (res.data.state === 200) {\r\n            // console.log(res.data.data)\r\n            this.postSelect = res.data.data\r\n          } else {\r\n            this.$message.error('获取岗位失败')\r\n          }\r\n        })\r\n        .catch(_error => {\r\n          this.$message.error('获取岗位失败')\r\n        })\r\n    },\r\n    // 获取用户信息\r\n    getUserInfo () {\r\n      // 获取用户信息\r\n      this.$http.get('/user/get_userinfo')\r\n        .then(res => {\r\n          console.log(res.data)\r\n          if (res.data.state === 200) {\r\n            this.userForm = res.data.data\r\n          }\r\n        })\r\n        .catch(_error => {\r\n          this.$message.error('获取用户信息失败' + _error)\r\n        })\r\n    },\r\n    // 修改本人信息\r\n    modifyUser () {\r\n      this.$refs.modifyFormRef.validate(valid => {\r\n        if (valid === true) {\r\n          // 表单验证通过，访问后端接口，修改用户信息\r\n          this.$http.put('/user/modify_userinfo', this.userForm)\r\n            .then(res => {\r\n              if (res.data.state === 200) {\r\n                this.getUserInfo()\r\n                this.$message.success('修改个人信息成功')\r\n              } else {\r\n                this.$message.error('修改个人信息失败')\r\n              }\r\n            })\r\n            .catch(_error => {\r\n              this.$message.error('修改个人信息失败')\r\n            })\r\n        } else {\r\n          // this.getUserInfo()\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n"],"sourceRoot":"src/components"}]}