{"remainingRequest":"D:\\MyProgram\\SpringBoot+Vue\\OldProject\\人事管理系统\\frontEnd\\hr\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyProgram\\SpringBoot+Vue\\OldProject\\人事管理系统\\frontEnd\\hr\\src\\components\\UserInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyProgram\\SpringBoot+Vue\\OldProject\\人事管理系统\\frontEnd\\hr\\src\\components\\UserInfo.vue","mtime":1595002925838},{"path":"D:\\MyProgram\\SpringBoot+Vue\\OldProject\\人事管理系统\\frontEnd\\hr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProgram\\SpringBoot+Vue\\OldProject\\人事管理系统\\frontEnd\\hr\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\MyProgram\\SpringBoot+Vue\\OldProject\\人事管理系统\\frontEnd\\hr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProgram\\SpringBoot+Vue\\OldProject\\人事管理系统\\frontEnd\\hr\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICB1c2VyRm9ybTogew0KICAgICAgICB1c2VybmFtZTogJycsDQogICAgICAgIGFkZHJlc3M6ICcnLA0KICAgICAgICBwaG9uZTogJycsDQogICAgICAgIGVtYWlsOiAnJywNCiAgICAgICAgdW5pdDogJycsDQogICAgICAgIHBvc2l0aW9uOiAnJw0KICAgICAgfSwNCiAgICAgIHVuaXRTZWxlY3Q6IFtdLA0KICAgICAgcG9zdFNlbGVjdDogW10sDQogICAgICB1c2VyRm9ybVJ1bGVzOiB7DQogICAgICAgIGFkZHJlc3M6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5Zyw5Z2A5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH1dLA0KICAgICAgICBwaG9uZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfnlLXor53kuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfV0sDQogICAgICAgIGVtYWlsOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+mCrueuseS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9XQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCAoKSB7DQogICAgdGhpcy5nZXRVbml0U2VsZWN0KCkNCiAgICB0aGlzLmdldFBvc3RTZWxlY3QoKQ0KICAgIHRoaXMuZ2V0VXNlckluZm8oKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6K6/6Zeu5ZCO56uv5o6l5Y+j77yM6I635Y+W5py65p6E5LiL5ouJ5qGGDQogICAgZ2V0VW5pdFNlbGVjdCAoKSB7DQogICAgICB0aGlzLiRodHRwLmdldCgnL3VzZXIvZ2V0dW5pdGJ5bmFtZT9uYW1lPSZjdXJyZW50X2luZGV4PTAmcGFnZV9zaXplPTEwMDAnKQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKQ0KICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0ZSA9PT0gMjAwKSB7DQogICAgICAgICAgICB0aGlzLnVuaXRTZWxlY3QgPSByZXMuZGF0YS5kYXRhDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluacuuaehOWksei0pScpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goX2Vycm9yID0+IHsNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnJvcikNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bmnLrmnoTlpLHotKUnKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgLy8g6K6/6Zeu5ZCO56uv77yM6I635Y+W5bKX5L2N5LiL5ouJDQogICAgZ2V0UG9zdFNlbGVjdCAoKSB7DQogICAgICB0aGlzLiRodHRwLmdldCgnL3VzZXIvZ2V0cG9zdD9uYW1lPSZjdXJyZW50X2luZGV4PTAmcGFnZV9zaXplPTEwMDAnKQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0ZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKQ0KICAgICAgICAgICAgdGhpcy5wb3N0U2VsZWN0ID0gcmVzLmRhdGEuZGF0YQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5blspfkvY3lpLHotKUnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKF9lcnJvciA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W5bKX5L2N5aSx6LSlJykNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBrw0KICAgIGdldFVzZXJJbmZvICgpIHsNCiAgICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBrw0KICAgICAgdGhpcy4kaHR0cC5nZXQoJy91c2VyL2dldF91c2VyaW5mbycpDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpDQogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXRlID09PSAyMDApIHsNCiAgICAgICAgICAgIHRoaXMudXNlckZvcm0gPSByZXMuZGF0YS5kYXRhDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goX2Vycm9yID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bnlKjmiLfkv6Hmga/lpLHotKUnICsgX2Vycm9yKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgLy8g5L+u5pS55pys5Lq65L+h5oGvDQogICAgbW9kaWZ5VXNlciAoKSB7DQogICAgICB0aGlzLiRyZWZzLm1vZGlmeUZvcm1SZWYudmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQgPT09IHRydWUpIHsNCiAgICAgICAgICAvLyDooajljZXpqozor4HpgJrov4fvvIzorr/pl67lkI7nq6/mjqXlj6PvvIzkv67mlLnnlKjmiLfkv6Hmga8NCiAgICAgICAgICB0aGlzLiRodHRwLnB1dCgnL3VzZXIvbW9kaWZ5X3VzZXJpbmZvJywgdGhpcy51c2VyRm9ybSkNCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0ZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRVc2VySW5mbygpDQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv67mlLnkuKrkurrkv6Hmga/miJDlip8nKQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S/ruaUueS4quS6uuS/oeaBr+Wksei0pScpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goX2Vycm9yID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5L+u5pS55Liq5Lq65L+h5oGv5aSx6LSlJykNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgLy8gdGhpcy5nZXRVc2VySW5mbygpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["UserInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserInfo.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <!-- 面包屑 -->\r\n        <el-breadcrumb separator=\"/\">\r\n            <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>设置中心</el-breadcrumb-item>\r\n            <el-breadcrumb-item>个人基本信息</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <el-row>\r\n              <el-col :span=\"10\">\r\n                <el-form ref=\"modifyFormRef\" :model=\"userForm\" label-width=\"110px\" :rules=\"userFormRules\">\r\n                    <el-form-item label=\"用户名：\">\r\n                    <el-input v-model=\"userForm.username\" width=\"100px\"  disabled></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"地址：\" prop=\"address\">\r\n                        <el-input v-model=\"userForm.address\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"电话：\" prop=\"phone\">\r\n                        <el-input v-model=\"userForm.phone\" ></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"邮箱：\" prop=\"email\">\r\n                        <el-input v-model=\"userForm.email\" ></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"所在机构：\">\r\n                        <el-select v-model=\"userForm.unit\" placeholder=\"请选择\" disabled>\r\n                            <el-option\r\n                            v-for=\"item in unitSelect\"\r\n                            :key=\"item.id\"\r\n                            :label=\"item.name\"\r\n                            :value=\"item.id\">\r\n                            </el-option>\r\n                        </el-select>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"岗位：\">\r\n                        <el-select v-model=\"userForm.position\" placeholder=\"请选择\" disabled>\r\n                            <el-option\r\n                            v-for=\"item in postSelect\"\r\n                            :key=\"item.id\"\r\n                            :label=\"item.name\"\r\n                            :value=\"item.id\">\r\n                            </el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item >\r\n                    <span class=\"button_span\">\r\n                        <el-button type=\"primary\" @click=\"modifyUser()\" size=\"small\">提交</el-button>\r\n                    </span>\r\n                    </el-form-item>\r\n                </el-form>\r\n              </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      userForm: {\r\n        username: '',\r\n        address: '',\r\n        phone: '',\r\n        email: '',\r\n        unit: '',\r\n        position: ''\r\n      },\r\n      unitSelect: [],\r\n      postSelect: [],\r\n      userFormRules: {\r\n        address: [{ required: true, message: '地址不能为空', trigger: 'blur' }],\r\n        phone: [{ required: true, message: '电话不能为空', trigger: 'blur' }],\r\n        email: [{ required: true, message: '邮箱不能为空', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getUnitSelect()\r\n    this.getPostSelect()\r\n    this.getUserInfo()\r\n  },\r\n  methods: {\r\n    // 访问后端接口，获取机构下拉框\r\n    getUnitSelect () {\r\n      this.$http.get('/user/getunitbyname?name=&current_index=0&page_size=1000')\r\n        .then(res => {\r\n          // console.log(res.data)\r\n          if (res.data.state === 200) {\r\n            this.unitSelect = res.data.data\r\n          } else {\r\n            this.$message.error('获取机构失败')\r\n          }\r\n        })\r\n        .catch(_error => {\r\n          // console.log(error)\r\n          this.$message.error('获取机构失败')\r\n        })\r\n    },\r\n    // 访问后端，获取岗位下拉\r\n    getPostSelect () {\r\n      this.$http.get('/user/getpost?name=&current_index=0&page_size=1000')\r\n        .then(res => {\r\n          if (res.data.state === 200) {\r\n            // console.log(res.data.data)\r\n            this.postSelect = res.data.data\r\n          } else {\r\n            this.$message.error('获取岗位失败')\r\n          }\r\n        })\r\n        .catch(_error => {\r\n          this.$message.error('获取岗位失败')\r\n        })\r\n    },\r\n    // 获取用户信息\r\n    getUserInfo () {\r\n      // 获取用户信息\r\n      this.$http.get('/user/get_userinfo')\r\n        .then(res => {\r\n          console.log(res.data)\r\n          if (res.data.state === 200) {\r\n            this.userForm = res.data.data\r\n          }\r\n        })\r\n        .catch(_error => {\r\n          this.$message.error('获取用户信息失败' + _error)\r\n        })\r\n    },\r\n    // 修改本人信息\r\n    modifyUser () {\r\n      this.$refs.modifyFormRef.validate(valid => {\r\n        if (valid === true) {\r\n          // 表单验证通过，访问后端接口，修改用户信息\r\n          this.$http.put('/user/modify_userinfo', this.userForm)\r\n            .then(res => {\r\n              if (res.data.state === 200) {\r\n                this.getUserInfo()\r\n                this.$message.success('修改个人信息成功')\r\n              } else {\r\n                this.$message.error('修改个人信息失败')\r\n              }\r\n            })\r\n            .catch(_error => {\r\n              this.$message.error('修改个人信息失败')\r\n            })\r\n        } else {\r\n          // this.getUserInfo()\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n"]}]}